project_name: generator
package: platform
quality: production
label: Matter Provisioner Generator
description: >
  Generates the key-pair, and CSR for the DAC
category: Example|Platform
filter:
  - { name: Device Type,  value: [SoC] }
  - { name: MCU,  value: [32-bit MCU] }
  - { name: Project Difficulty,  value: [Beginner] }
ui_hints:
  highlight:
  - { path: README.md, focus: true }
readme:
  - { path: README.md }

sdk: { id: simplicity_sdk, version: 2024.6.0}

provides:
  - name: nvm3_custom_init

component:
  - { id: freertos }
  - { id: sl_system }
  - { id: device_init }
  - { id: cpp_support }
  - { id: iostream_rtt }
  - { id: psa_its }
  - { id: psa_driver }
  - { id: psa_crypto }
  - { id: psa_crypto_ecc_secp256r1 }
  - { id: psa_crypto_sha256 }
  - { id: psa_crypto_ecdsa }
  - { id: psa_crypto_cipher_ctr }
  - { id: mbedtls_pkcs5 }
  - { id: mbedtls_ecc }
  - { id: mbedtls_sha }
  - { id: mbedtls_x509 }
  - { id: bootloader_app_properties }
  - id: emlib_rmu 
    condition: [device_series_2]
  - id: hal_emu 
    condition: [device_series_3]

include:
  - { path: '.' }
  - { path: ../../third_party/matter_sdk/examples }
  - { path: ../../third_party/matter_sdk/examples/platform/silabs }
  - { path: ../../third_party/matter_sdk/src }
  - { path: ../../third_party/matter_sdk/src/include }
  - { path: ../../third_party/matter_sdk/src/platform/silabs }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision }
  - { path: ../../third_party/matter_sdk/zzz_generated/app-common }
  - { path: ../../third_party/nlassert/include }
  - { path: ../../third_party/nlio/include }
  - { path: ../../third_party/simplicity_sdk/platform/bootloader }
  - { path: ../../third_party/simplicity_sdk/protocol/bluetooth/config }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/platformAbstraction }

source:
  - { path: app.h }
  - { path: app.cpp }
  - { path: main.cpp }
  - { path: efr32.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/platformAbstraction/GsdkSpam.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/AttestationKey.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/AttestationKeyPSA.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionChannel.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionChannelRTT.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionEncoder.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionEncoder.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionManager.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionManager.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionProtocol.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionProtocolV1.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionProtocolV2.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionStorage.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionStorageGeneric.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/provision/ProvisionStorage.cpp }
  - { path: ../../third_party/matter_sdk/examples/platform/silabs/provision/ProvisionStorageCustom.cpp }
  - { path: ../../third_party/matter_sdk/examples/platform/silabs/provision/ProvisionStorageDefault.cpp }
  - { path: ../../third_party/matter_sdk/src/lib/support/Base64.h }
  - { path: ../../third_party/matter_sdk/src/lib/support/Base64.cpp }
  - { path: ../../third_party/matter_sdk/src/lib/support/BytesToHex.h }
  - { path: ../../third_party/matter_sdk/src/lib/support/BytesToHex.cpp }
  - { path: ../../third_party/matter_sdk/src/lib/support/logging/CHIPLogging.h }
  - { path: ../../third_party/matter_sdk/src/lib/support/logging/TextOnlyLogging.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/SilabsConfig.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/SilabsConfig.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/Logging.cpp }
  - { path: ../../third_party/matter_sdk/src/crypto/CHIPCryptoPALPSA.cpp }
  - { path: ../../third_party/matter_sdk/src/setup_payload/Base38Encode.h }
  - { path: ../../third_party/matter_sdk/src/setup_payload/Base38Encode.cpp }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/multi-ota/OtaTlvEncryptionKey.h }
  - { path: ../../third_party/matter_sdk/src/platform/silabs/multi-ota/OtaTlvEncryptionKey.cpp }

define:
- { name: SL_PROVISION_GENERATOR, value: '1' }
- { name: SL_PROVISION_CHANNEL_ENABLED, value: '1' }
- { name: SILABS_PROVISION_PROTOCOL_V1, value: '0' }
- { name: OTA_ENCRYPTION_ENABLE, value: '1'}
- { name: CHIP_SYSTEM_CONFIG_USE_SOCKETS, value: '1' }
- { name: CHIP_CONFIG_SHA256_CONTEXT_SIZE, value: '256' }
- { name: CHIP_CRYPTO_PLATFORM, value: '1'}
- { name: CHIP_LOG_FILTERING, value: '1'}
- { name: CHIP_PLATFORM_CONFIG_INCLUDE, value: '<platform/silabs/CHIPPlatformConfig.h>' }

toolchain_settings:
- { option: optimize, value: size }
- { option: cxx_standard, value: c++17 }
- { option: gcc_compiler_option, value: -Wno-unused-parameter }

template_contribution:
  - name: memory_flash_start
    value: 0x1008000
    condition: [device_family_simg301]
  - name: memory_flash_size
    value: 0x3c7000
    condition: [device_family_simg301]